# PIC Serial Bootloader
This is a serial bootloader originally written for the **PIC18F66K22** MCU.  The base bootloader has been provided by Microchip as part of the AN1310 engineering application.  It's critical to note that the application that is to be loaded via the bootloader be given an offset of _hex_ 0x800 to avoid clobbering the bootloader application, which resides at the beginning of program space. For instructions on how to apply a code offset, see the README file in the repository for the application to be bootloaded.   


## Building
It's not uncommon to get an error that reads _Operand contains unresolvable labels or is too complex_.  It appears this error is generated by the linker.  To resolve this error (which only seems to be present in MPLAB X), the _build in absolute mode_ must be selected under project properties.  To access this location, launch the Project Properties window.  Then, select **mpasm (Global Options)**.  In the window that's off to the right, check the box to instruct the compiler to **Build in absolute mode**. 

## Using the Bootloader
Bootloading an application onto the processor requires the use of the AN1310 PC application.  In order to trigger the bootloader on the MCU, a reset will need to be initiated.  How the reset is initiated will be at the user's discretion.  Typically, there's a console interface that provides the user with the means to initiate a reset condition.  Such an action should be closely coordinated with the activities required within the PC's AN1310 Bootloading Application.  Such coordination is usually spelled out in the user's console served up by the target MCU.        

## Dependencies
* IDE and version: MPLAB X v5.10
* Compiler and version: mpasmx v5.82
* Linker and version: mplink v5.09
* PIC18 Bootloader.asm
* bootconfig.inc
* devices.inc
* preprocess.inc

## Tagged Versions 
"Out of the box", the bootloader was sitting at revision v1.6.  Other tagged versions were not thoroughly documented, nor was a revision control system utilized.  

* Revision v2.0 -- Bootload BAUD rate hardcoded at 115200bps.  Bootloader size adjusted accordingly.  Bootloader resides at the beginning of program space, thus reset/interrupt vectors have been remapped.  Bootloader has been adjusted to work with UART2.  This version compiles without warnings, but has not been successfully tested.    
